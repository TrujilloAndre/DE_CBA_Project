{% extends 'base.html' %}

{% block head %}
<title>CBA Sales Data</title>
{% endblock %}

{% block body %}

<div class="content">  
    <h1>
        <img src="{{ url_for('static', filename='images/cba_logo.png') }}" alt="CBA Logo" class="logo">
        Sales Data
    </h1>    
    <form action="/" method="GET">
        <label for="start_date">Start Date:</label>
        <input type="date" name="start_date" id="start_date" required>
        
        <label for="end_date">End Date:</label>
        <input type="date" name="end_date" id="end_date" required>

        <label for="output_format">Format:</label>
        <select name="output_format" id="output_format">
            <option value="json">JSON</option>
            <option value="list">List</option>
            <option value="dataframe">DataFrame</option>
        </select>

        <input type="submit" value="Filter Sales">
    </form>

    <table>
        <tr>
            <th>Store ID</th>
            <th>Total Sales</th>
            <th>Date</th>
            <th>Actions</th>
        </tr>
        {% for sale in sales %}
        <tr>
            <td>{{ sale.store_id }}</td>
            <td>{{ sale.total_sales }}</td> 
            <td>{{ sale.date}}</td> 
            <td>
                <a href="/delete/{{sale.id}}">Delete</a>
                <br>
                <a href="/update/{{sale.id}}">Update</a>
            </td>
        </tr>
        {% endfor %}
    </table>

    <form action="/" method="POST">
        <label for="store_id">Store ID:</label>
        <input type="text" name="store_id" id="store_id" required><br>

        <label for="total_sales">Total Sales:</label>
        <input type="number" step="0.01" name="total_sales" id="total_sales" required><br>

        <label for="date">Date:</label>
        <input type="date" name="date" id="date" required><br>

        <input type="submit" value="Add Sale">
    </form>

    {% with messages = get_flashed_messages(with_categories=true) %}
        {% if messages %}
            <div class="flash-messages">
                {% for category, message in messages %}
                    <div class="alert alert-{{ category }}">{{ message }}</div>
                {% endfor %}
            </div>
        {% endif %}
    {% endwith %}
</div>
{% endblock %}